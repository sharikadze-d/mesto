(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r,o){var i=e.name,u=e.link,a=e.likes,c=e.owner,l=e._id,s=o.handleCardClick,f=o.handleDeleteClick,p=o.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._templateSelector=n,this._name=i,this._link=u,this._handleCardClick=s,this._likes=a,this._likeCount=a.length,this._handleDeleteClick=f,this._owner=c._id,this._id=l,this._handleLikeClick=p,this._userId=r,this.isLiked=this._checkLike()}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){this._template=document.querySelector(this._templateSelector).content.querySelector(".element"),this._card=this._template.cloneNode(!0),this._image=this._card.querySelector(".element__image"),this._text=this._card.querySelector(".element__title"),this._buttonLike=this._card.querySelector(".element__like-btn"),this._buttonDelete=this._card.querySelector(".element__delete-btn"),this._likeCounter=this._card.querySelector(".element__like-counter")}},{key:"_checkOwner",value:function(){this._owner!==this._userId&&this._buttonDelete.remove()}},{key:"_checkLike",value:function(){var t=this,e=!1;return this._likes.forEach((function(n){n._id===t._userId&&(e=!0)})),e}},{key:"_addLike",value:function(){this._buttonLike.classList.add("element__like-btn_active")}},{key:"_removeLike",value:function(){this._buttonLike.classList.remove("element__like-btn_active")}},{key:"toggleLike",value:function(t){this.setLikesCount(t),this.isLiked?this._removeLike():this._addLike(),this.isLiked=!this.isLiked}},{key:"setLikesCount",value:function(t){this._likeCounter.textContent=t}},{key:"_setData",value:function(){this._image.src=this._link,this._image.alt=this._name,this._text.textContent=this._name,this.setLikesCount(this._likeCount),this.isLiked&&this._addLike()}},{key:"delete",value:function(){this._card.remove(),this._card=null}},{key:"_setListeners",value:function(){var t=this;this._buttonLike.addEventListener("click",this._handleLikeClick),this._buttonDelete.addEventListener("click",this._handleDeleteClick),this._image.addEventListener("click",(function(e){t._handleCardClick(e)}))}},{key:"getCardData",value:function(){var t={};return t.link=this._link,t.text=this._text.textContent,t}},{key:"createCard",value:function(){return this._getTemplate(),this._checkOwner(),this._setData(),this._setListeners(),this._card}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._form.querySelector(this._config.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.textContent=t.validationMessage,e.classList.add(this._config.errorClass),t.classList.add(this._config.inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-error"));e.textContent="",e.classList.remove(this._config.errorClass),t.classList.remove(this._config.inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_setEventListeners",value:function(){var t=this;this.toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))}))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.classList.remove(this._config.buttonOpacity),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.classList.add(this._config.buttonOpacity),this._buttonElement.disabled=!1)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var c=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._containerSelector=n,this._container=document.querySelector(this._containerSelector)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"addInitialItems",value:function(){var t=this;this._items.reverse().forEach((function(e){t._renderer(e)}))}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._buttonSubmit=this._popup.querySelector(".popup__save-btn"),this._buttonClose=this._popup.querySelector(".popup__close-btn")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._buttonClose.addEventListener("click",(function(){t.close()})),this._popup.addEventListener("mousedown",(function(e){e.target===e.currentTarget&&t.close()}))}},{key:"renderLoading",value:function(t){this._buttonSubmit.textContent=t?this._buttonSubmit.dataset.buttonLoadingText:this._buttonSubmit.dataset.buttonText}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},h.apply(this,arguments)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(r);if(o){var n=v(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._text=e._popup.querySelector(".popup__description"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.link,n=t.text;this._image.src=e,this._image.alt=n,this._text.textContent=n,h(v(u.prototype),"open",this).call(this)}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=e,n._form=n._popup.querySelector(".popup__form"),n._inputList=Array.from(n._popup.querySelectorAll(".popup__item")),n._buttonSubmit=n._popup.querySelector(".popup__save-btn"),n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t=this;g(S(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault();var n=t._getInputValues();t._handleFormSubmit(n)}))}},{key:"setInputValues",value:function(t){var e=0;for(var n in t)this._inputList[e].value=t[n],e++}},{key:"close",value:function(){g(S(u.prototype),"close",this).call(this),this._form.reset()}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}var j=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(n),this._job=document.querySelector(r),this._avatar=document.querySelector(o),this.id}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){var t={};return t.name=this._name.textContent,t.job=this._job.textContent,t}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar,o=t._id;this._name.textContent=e,this._job.textContent=n,this.setAvatar({avatar:r}),this.id=o}},{key:"setAvatar",value:function(t){var e=t.avatar;this._avatar.src=e}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var P=function(t){return t.ok?t.json():Promise.reject(new Error("Ошибка: ".concat(t.status)))},T=function(){function t(e){var n=e.url,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=n,this._headers=r}var e,n;return e=t,(n=[{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(P)}},{key:"setUserData",value:function(t){var e=t.name,n=t.about;return fetch("".concat(this._url,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:n})}).then(P)}},{key:"getInitialCardsData",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(P)}},{key:"setCardData",value:function(t){var e=t.name,n=t.link;return fetch("".concat(this._url,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e,link:n})}).then(P)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t._id),{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?t:Promise.reject(new Error("Ошибка: ".concat(e.status)))}))}},{key:"addLike",value:function(t){var e=t._id;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{headers:this._headers,method:"PUT"}).then(P)}},{key:"removeLike",value:function(t){var e=t._id;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{headers:this._headers,method:"DELETE"}).then(P)}},{key:"setAvatar",value:function(t){var e=t.link;return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then(P)}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),I={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"popup__save-btn_disabled",inputErrorClass:"popup__item_type_error",errorClass:"popup__error_visible",buttonOpacity:"button-opacity"},q={container:".elements",nameField:".profile__name",jobField:".profile__description",avatar:".profile__avatar",popupProfile:".popup_type_profile",popupCard:".popup_type_card",popupPicture:".popup_type_picture",popupConfirm:".popup_type_confirm",popupAvatar:".popup_type_avatar",cardTemplateId:"#card"},D=document.querySelector(".profile__edit-button"),R=document.querySelector(".profile__add-button"),x=document.querySelector(".profile__avatar-wrapper"),B=document.querySelector('.popup__form[name="profile-input-form"]'),A=document.querySelector('.popup__form[name="add-card-input-form"]'),U=document.querySelector('.popup__form[name="avatar-input-form"]');function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},N.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(r);if(o){var n=H(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._action=e,n._form=n._popup.querySelector(".popup__form"),n}return e=u,(n=[{key:"open",value:function(t){this.item=t,N(H(u.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;N(H(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._action(t.item)}))}}])&&F(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function M(t){var e=new n(t,q.cardTemplateId,Y.id,{handleCardClick:function(){nt.open(e.getCardData())},handleDeleteClick:function(){et.open(e)},handleLikeClick:function(){e.isLiked?K.removeLike(e).then((function(t){e.toggleLike(t.likes.length)})):K.addLike(e).then((function(t){e.toggleLike(t.likes.length)}))}});return e.createCard()}var G,K=new T({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{"Content-Type":"application/json",authorization:"7daba374-a55e-4250-81a9-4f3724b24784"}});Promise.all([K.getUserData().then((function(t){Y.setUserInfo(t)})).catch((function(){console.log(new Error("Ошибка загрузки"))})),K.getInitialCardsData().then((function(t){(G=new c({items:t,renderer:function(t){var e=M(t);G.addItem(e)}},q.container)).addInitialItems()}))]);var Q=new i(I,B),W=new i(I,A),X=new i(I,U),Y=new j({nameSelector:q.nameField,jobSelector:q.jobField,avatarSelector:q.avatar}),Z=new w(q.popupProfile,(function(t){Z.renderLoading(!0),K.setUserData(t).then((function(t){Y.setUserInfo(t),Z.close()})).finally((function(){Z.renderLoading(!1)}))})),$=new w(q.popupCard,(function(t){$.renderLoading(!0),K.setCardData(t).then((function(t){var e=M(t);G.addItem(e),$.close()})).finally((function(){$.renderLoading(!1)}))})),tt=new w(q.popupAvatar,(function(t){tt.renderLoading(!0),K.setAvatar(t).then((function(t){Y.setAvatar(t)})).then((function(){tt.close()})).finally((function(){tt.renderLoading(!1)}))})),et=new z(q.popupConfirm,(function(t){et.renderLoading(!0),K.deleteCard(t).then((function(t){t.delete()})).then((function(){et.close()})).finally((function(){et.renderLoading(!1)}))})),nt=new b(q.popupPicture);Z.setEventListeners(),$.setEventListeners(),nt.setEventListeners(),et.setEventListeners(),tt.setEventListeners(),Z.setInputValues(Y.getUserInfo()),D.addEventListener("click",(function(){Z.setInputValues(Y.getUserInfo()),Z.open()})),R.addEventListener("click",(function(){W.toggleButtonState(),$.open()})),x.addEventListener("click",(function(){tt.open()})),Q.enableValidation(),W.enableValidation(),X.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUEsRUFBSytHLFFBQVMsSUFDN0J4RCxNQUFLLFdBQVErQixHQUFtQnpFLE9BQVMsSUFDekMrRixTQUFRLFdBQVF0QixHQUFtQm9CLGVBQWMsRUFBUSxHQUMxRCxJQUVJdkIsR0FBYSxJQUFJL0QsRUFBZTBDLEVBQVVNLGNBSTlDRixFQUFhOEMsb0JBQ2I3QyxFQUFVNkMsb0JBQ1Y3QixHQUFXNkIsb0JBQ1gxQixHQUFtQjBCLG9CQUNuQjFDLEdBQVkwQyxvQkFLZDlDLEVBQWErQyxlQUFlL0IsRUFBU2dDLGVBR3JDMUMsRUFBdUJ0SCxpQkFBaUIsU0FBUyxXQUMvQ2dILEVBQWErQyxlQUFlL0IsRUFBU2dDLGVBQ3JDaEQsRUFBYWtCLE1BQU0sSUFFckJYLEVBQTRCdkgsaUJBQWlCLFNBQVMsV0FDcERzSixFQUFrQnhILG9CQUNsQm1GLEVBQVVpQixNQUNaLElBRUFWLEVBQWF4SCxpQkFBaUIsU0FBUyxXQUNyQ29ILEdBQVljLE1BQ2QsSUE5R0VtQixFQUFxQlksbUJBQ3JCWCxFQUFrQlcsbUJBQ2xCVixFQUFvQlUsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih7bmFtZSwgbGluaywgbGlrZXMsIG93bmVyLCBfaWR9LCB0ZW1wbGF0ZVNlbGVjdG9yLCBwYWdlT3duZXIsXHJcbiAgICAgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSkge1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX2xpa2VDb3VudCA9IGxpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9vd25lciA9IG93bmVyLl9pZDtcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5fdXNlcklkID0gcGFnZU93bmVyO1xyXG4gICAgdGhpcy5pc0xpa2VkID0gdGhpcy5fY2hlY2tMaWtlKCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8v0J/QvtC70YPRh9C10L3QuNC1INGI0LDQsdC70L7QvdCwINC60LDRgNGC0L7RgNGH0LrQuCDQuCDQstGB0LXRhSDQvdGD0LbQvdGL0YUg0Y3Qu9C10LzQtdC90YLQvtCyXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKTtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl90ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl90ZXh0ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKTtcclxuICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWJ0bicpO1xyXG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ0bicpO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50ZXInKTtcclxuICB9XHJcblxyXG4gIC8v0J/RgNC+0LLQtdGA0LrQsCDRj9Cy0LvRj9C10YLRgdGPINC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINCy0LvQsNC00LXQu9GM0YbQtdC8INC60LDRgNGC0L7Rh9C60LhcclxuICBfY2hlY2tPd25lcigpIHtcclxuICAgIGlmICh0aGlzLl9vd25lciAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v0J/RgNC+0LLQtdGA0LrQsCDQu9Cw0LnQutCw0Lsg0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LrQsNGA0YLQvtGH0LrRg1xyXG4gIF9jaGVja0xpa2UoKSB7XHJcbiAgICBsZXQgbGlrZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5fbGlrZXMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgaWYgKHVzZXIuX2lkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICBsaWtlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbGlrZTtcclxuICB9XHJcblxyXG4gIC8v0JTQvtCx0LDQstC70LXQvdC40LUg0LvQsNC50LrQsFxyXG4gIF9hZGRMaWtlKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlLWJ0bl9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIC8v0KHQvdGP0YLQuNC1INC70LDQudC60LBcclxuICBfcmVtb3ZlTGlrZSgpIHtcclxuICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudF9fbGlrZS1idG5fYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxuICAvL9CS0YvQsdC+0YAg0LTQvtCx0LDQstC70LXQvdC40Y8v0YHQvdGP0YLQuNGPINC70LDQudC60LAg0Lgg0YPRgdGC0LDQvdC+0LLQutCwINC60L7Qu9C40YfQtdGB0YLQstCwINC70LDQudC60L7QslxyXG4gIHRvZ2dsZUxpa2UoY291bnQpIHtcclxuICAgIHRoaXMuc2V0TGlrZXNDb3VudChjb3VudCk7XHJcblxyXG4gICAgaWYodGhpcy5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUxpa2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2FkZExpa2UoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlzTGlrZWQgPSAhdGhpcy5pc0xpa2VkXHJcbiAgfVxyXG5cclxuICAvL9Cj0YHRgtCw0L3QvtCy0LrQsCDQutC+0LvQuNGH0LXRgdGC0LLQsCDQu9Cw0LnQutC+0LJcclxuICBzZXRMaWtlc0NvdW50KGNvdW50KSB7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IGNvdW50O1xyXG4gIH1cclxuXHJcbiAgLy/Qn9C10YDQtdC00LDRh9CwINC60LDRgNGC0L7Rh9C60LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQuCDQt9Cw0LPQvtC70L7QstC60LBcclxuICBfc2V0RGF0YSgpIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fdGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLnNldExpa2VzQ291bnQodGhpcy5fbGlrZUNvdW50KTtcclxuXHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7IHRoaXMuX2FkZExpa2UoKSB9XHJcbiAgfVxyXG5cclxuICAvL9Cj0LTQsNC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxyXG4gIGRlbGV0ZSgpIHtcclxuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8v0JTQvtCx0LDQstC70LXQvdC40LUg0YHQu9GD0YjQsNGC0LXQu9C10LlcclxuICBfc2V0TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUxpa2VDbGljayk7XHJcbiAgICB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEZWxldGVDbGljayk7XHJcbiAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2dCA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayhldnQpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8v0J/QvtC70YPRh9C10L3QuNC1INC00LDQvdC90YvRhSDQutCw0YDRgtC+0YfQutC4XHJcbiAgZ2V0Q2FyZERhdGEoKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICBkYXRhLmxpbmsgPSB0aGlzLl9saW5rO1xyXG4gICAgZGF0YS50ZXh0ID0gdGhpcy5fdGV4dC50ZXh0Q29udGVudDtcclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIC8v0KHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4XHJcbiAgY3JlYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jaGVja093bmVyKCk7XHJcbiAgICB0aGlzLl9zZXREYXRhKCk7XHJcbiAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvL9Cf0L7QutCw0LfQsNGC0Ywg0L7RiNC40LHQutGDXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvL9Ch0LrRgNGL0YLRjCDQvtGI0LjQsdC60YNcclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLy/Qn9GA0L7QstC10YDQutCwINCy0LDQu9C40LTQvdC+0YHRgtC4INC/0L7Qu9GPXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/QlNC+0LHQsNCy0LvQtdC90LjQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0YHQvtCx0YvRgtC40Y8gJ2lucHV0JyDQvdCwINC/0L7Qu9GPINCy0LLQvtC00LBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvL9Cf0YDQvtCy0LXRgNC60LAg0L3QsNC70LjRh9C40Y8v0L7RgtGB0YPRgtGB0LLQuNGPINC90LXQstCw0LvQuNC00L3QvtCz0L4g0L/QvtC70Y8g0LIg0YTQvtGA0LzQtVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgcmV0dXJuICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/QkNC60YLQuNCy0LDRhtC40Y8v0LTQtdCw0LrRgtC40LLQsNGG0LjRjyDQutC90L7Qv9C60Lggc3VibWl0XHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5idXR0b25PcGFjaXR5KVxyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuYnV0dG9uT3BhY2l0eSlcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/QktC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICAgIC8v0J/QvtC70YPRh9C10L3QuNC1INC60L7QvdGC0LXQudC90LXRgNCwINC/0L4g0YHQtdC70LXQutGC0L7RgNGDXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8v0JzQtdGC0L7QtCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbiAgYWRkSXRlbShjYXJkKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkKTtcclxuICB9XHJcblxyXG4gIC8v0JzQtdGC0L7QtCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQtdC6IFwi0LjQtyDQutC+0YDQvtCx0LrQuFwiXHJcbiAgYWRkSW5pdGlhbEl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMucmV2ZXJzZSgpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSlcclxuICB9XHJcbn0iLCJjb25zdCBLRVlfRVNDQVBFX1ZBTFVFID0gJ0VzY2FwZScgXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ0bicpO1xyXG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ0bicpO1xyXG4gIH1cclxuXHJcbiAgLy/QnNC10YLQvtC0INC+0YLQutGA0YvRgtC40Y8g0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy/QnNC10YLQvtC0INC30LDQutGA0YvRgtC40Y8g0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIC8v0J7QsdGA0LDQsdC+0YLRh9C40Log0LfQsNC60YDRi9GC0LjRjyDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDQutC70LDQstC40YjQtdC5IFwiRXNjXCJcclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gS0VZX0VTQ0FQRV9WQUxVRSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL9CU0L7QsdCw0LLQu9C10L3QuNC1INGB0LvRg9GI0LDRgtC10LvQtdC5INGB0L7QsdGL0YLQuNC5XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9idXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgdGhpcy5jbG9zZSgpOyB9KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldnQgPT4ge1xyXG4gICAgICBpZihldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8v0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQv9GA0L7RhtC10YHRgdCwINC30LDQs9GA0YPQt9C60LhcclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25TdWJtaXQuZGF0YXNldC5idXR0b25Mb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblN1Ym1pdC5kYXRhc2V0LmJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG4gICAgdGhpcy5fdGV4dCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGVzY3JpcHRpb24nKTtcclxuICB9XHJcblxyXG4gIC8v0J7RgtC60YDRi9GC0LjQtSDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDRgSDQv9GA0LXQtNCy0LDRgNC40YLQtdC70YzQvdGL0Lwg0L3QsNC/0L7Qu9C90LXQvdC40LXQvFxyXG4gIG9wZW4oeyBsaW5rLCB0ZXh0IH0pIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0ZXh0O1xyXG4gICAgdGhpcy5fdGV4dC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICBzdXBlci5vcGVuKClcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pdGVtJykpO1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ0bicpO1xyXG4gIH1cclxuXHJcbiAgLy/Qn9C+0LvRg9GH0LXQvdC40LUg0LfQvdCw0YfQtdC90LjQuSDQv9C+0LvQtdC5INGE0L7RgNC80YtcclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlc0xpc3QgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNMaXN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBpbnB1dFZhbHVlc0xpc3Q7XHJcbiAgfVxyXG5cclxuICAvL9CU0L7QsdCw0LLQu9C10L3QuNC1INGB0LvRg9GI0LDRgtC10LvQtdC5INGB0L7QsdGL0YLQuNC5XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChkYXRhKTtcclxuICAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy/Ql9Cw0L/QvtC70L3QtdC90LjQtSDQv9C+0LvQtdC5INGE0L7RgNC80Ysg0LTQsNC90L3Ri9C80Lgg0LjQtyDQv9C10YDQtdC00LDQstCw0LXQvNC+0LPQviDQvtCx0YrQtdC60YLQsFxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gZGF0YSkge1xyXG4gICAgICB0aGlzLl9pbnB1dExpc3RbaW5kZXhdLnZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICBpbmRleCsrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/Ql9Cw0LrRgNGL0YLQuNC1INC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwINGB0L4g0YHQsdGA0L7RgdC+0Lwg0LfQvdCw0YfQtdC90LjQuSDQv9C+0LvQtdC5INGE0L7RgNC80YtcclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5pZDtcclxuICB9XHJcblxyXG4gIC8v0JzQtdGC0L7QtCDQv9C+0LvRg9GH0LXQvdC40LUg0LTQsNC90L3Ri9GFINC/0YDQvtGE0LjQu9GPINGB0L4g0YHRgtGA0LDQvdC40YbRi1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgZGF0YS5uYW1lID0gdGhpcy5fbmFtZS50ZXh0Q29udGVudDtcclxuICAgIGRhdGEuam9iID0gdGhpcy5fam9iLnRleHRDb250ZW50O1xyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgLy/QnNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8g0L3QsCDRgdGC0YDQsNC90LjRhtC1INC40Lcg0L/QtdGA0LXQtNCw0LLQsNC10LzQvtCz0L4g0L7QsdGK0LXQutGC0LBcclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIsIF9pZCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgdGhpcy5zZXRBdmF0YXIoeyBhdmF0YXIgfSk7XHJcbiAgICB0aGlzLmlkID0gX2lkO1xyXG4gIH1cclxuXHJcbiAgLy/QnNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDQsNCy0LDRgtCw0YDQsCDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICBzZXRBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn0iLCJjb25zdCBoYW5kbGVSZXNwb25zZSA9IHJlcyA9PiB7IC8v0J7QsdGA0LDQsdC+0YLQutCwINC+0YLQstC10YLQsFxyXG4gIGlmIChyZXMub2spIHtcclxuICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gIH1cclxuICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyB1cmwsIGhlYWRlcnN9KSB7XHJcbiAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVyc1xyXG4gIH1cclxuXHJcbiAgLy/Qn9C+0LvRg9GH0LXQvdC40LUg0LTQsNC90L3Ri9GFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gIGdldFVzZXJEYXRhKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxyXG4gIH1cclxuXHJcbiAgLy/Qo9GB0YLQsNC90L7QstC60LAg0LTQsNC90L3Ri9GFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gIHNldFVzZXJEYXRhKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7IFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dFxyXG4gICAgICB9KVxyXG4gICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcclxuICB9XHJcblxyXG4gIC8v0J/QvtC70YPRh9C10L3QuNC1INC00LDQvdC90YvRhSDQutCw0YDRgtC+0YfQtdC6IFwi0LjQtyDQutC+0YDQvtCx0LrQuFwiXHJcbiAgZ2V0SW5pdGlhbENhcmRzRGF0YSgpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXHJcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcclxuICB9XHJcblxyXG4gIC8v0J7RgtC/0YDQsNCy0LrQsCDQtNCw0L3QvdGL0YUg0LrQsNGA0YLQvtGH0LrQuCDQvdCwINGB0LXRgNCy0LXRgFxyXG4gIHNldENhcmREYXRhKCB7bmFtZSwgbGluayB9ICkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7IFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGlua1xyXG4gICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxyXG4gIH1cclxuXHJcbiAgLy/Qo9C00LDQu9C10L3QuNC1INC00LDQvdC90YvRhSDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwXHJcbiAgZGVsZXRlQ2FyZChpdGVtKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2l0ZW0uX2lkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJ1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiBpdGVtOyAvL9Ca0L7QtCDQvdC1INC00YPQsdC70LjRgNGD0LXRgtGB0Y8uIFxyXG4gICAgICAgIC8vaGFuZGxlUmVzcG9uc2Ug0LIg0YHQu9GD0YfQsNC1INGD0YHQv9C10YXQsCDQstC+0LfQstGA0LDRidCw0LXRgiDQvtGC0LLQtdGCINGBINGB0LXRgNCy0LXRgNCwLFxyXG4gICAgICAgIC8v0LAg0LIg0LTQsNC90L3QvtC8INGB0LvRg9GH0LDQtSDQstC+0LfQstGA0LDRidCw0LXRgtGB0Y8g0LDRgNCz0YPQvNC10L3Rgiwg0L/QtdGA0LXQtNCw0L3QvdGL0Lkg0LIgZGVsZXRlQ2FyZCxcclxuICAgICAgICAvL9GCLtC1LiDRgdCw0LzQsCDQutCw0YDRgtC+0YfQutCwLiDQn9C+0Y3RgtC+0LzRgyDQvdC1INC40YHQv9C+0LvRjNC30L7QstCw0LvQsNGB0YwgaGFuZGxlUmVzcG9uc2VcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8v0J7RgtC/0YDQsNCy0LrQsCDQvdCwINGB0LXRgNCy0LXRgCDQtNCw0L3QvdGL0YUg0L4g0L3QsNC20LDRgtC40Lgg0L3QsCBcItC70LDQudC6XCJcclxuICBhZGRMaWtlKCB7X2lkfSApIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7X2lkfS9saWtlc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiAnUFVUJ1xyXG4gICAgfSlcclxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxyXG4gIH1cclxuXHJcbiAgLy/QntGC0L/RgNCw0LLQutCwINC90LAg0YHQtdGA0LLQtdGAINC00LDQvdC90YvRhSDQviDRgdC90Y/RgtC40Lgg0LvQsNC50LrQsFxyXG4gIHJlbW92ZUxpa2UoIHtfaWR9ICkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtfaWR9L2xpa2VzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXHJcbiAgfVxyXG5cclxuICAvL9GD0YHRgtCw0L3QvtCy0LrQsCDQsNCy0LDRgtCw0YDQsFxyXG4gIHNldEF2YXRhcigge2xpbmt9ICkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmtcclxuICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG5cclxuIiwiY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2l0ZW0nLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlLWJ0bicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlLWJ0bl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2l0ZW1fdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcclxuICBidXR0b25PcGFjaXR5OiAnYnV0dG9uLW9wYWNpdHknXHJcbn07XHJcblxyXG5jb25zdCBhcGlDb25maWcgPSB7XHJcbiAgdXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MCcsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgIGF1dGhvcml6YXRpb246ICc3ZGFiYTM3NC1hNTVlLTQyNTAtODFhOS00ZjM3MjRiMjQ3ODQnXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY29udGFpbmVyOiAnLmVsZW1lbnRzJyxcclxuICBuYW1lRmllbGQ6ICcucHJvZmlsZV9fbmFtZScsXHJcbiAgam9iRmllbGQ6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nLFxyXG4gIGF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInLFxyXG4gIHBvcHVwUHJvZmlsZTogJy5wb3B1cF90eXBlX3Byb2ZpbGUnLFxyXG4gIHBvcHVwQ2FyZDogJy5wb3B1cF90eXBlX2NhcmQnLFxyXG4gIHBvcHVwUGljdHVyZTogJy5wb3B1cF90eXBlX3BpY3R1cmUnLFxyXG4gIHBvcHVwQ29uZmlybTogJy5wb3B1cF90eXBlX2NvbmZpcm0nLFxyXG4gIHBvcHVwQXZhdGFyOiAnLnBvcHVwX3R5cGVfYXZhdGFyJyxcclxuICBjYXJkVGVtcGxhdGVJZDogJyNjYXJkJ1xyXG59XHJcblxyXG5cclxuXHJcbi8v0JrQvdC+0L/QutC4XHJcbmNvbnN0IGJ1dHRvbk9wZW5Qcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuY29uc3QgYnV0dG9uT3BlbkNhcmRBZGRpdGlvblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgYnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci13cmFwcGVyJyk7XHJcblxyXG4vL9Ck0L7RgNC80YtcclxuY29uc3QgZm9ybUVsZW1lbnRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtW25hbWU9XCJwcm9maWxlLWlucHV0LWZvcm1cIl0nKTtcclxuY29uc3QgZm9ybUVsZW1lbnRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtW25hbWU9XCJhZGQtY2FyZC1pbnB1dC1mb3JtXCJdJyk7XHJcbmNvbnN0IGZvcm1FbGVtZW50QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtW25hbWU9XCJhdmF0YXItaW5wdXQtZm9ybVwiXScpO1xyXG5cclxuZXhwb3J0IHtcclxuICBhcGlDb25maWcsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBzZWxlY3RvcnMsXHJcbiAgYnV0dG9uT3BlblByb2ZpbGVQb3B1cCxcclxuICBidXR0b25PcGVuQ2FyZEFkZGl0aW9uUG9wdXAsXHJcbiAgZm9ybUVsZW1lbnRQcm9maWxlLFxyXG4gIGZvcm1FbGVtZW50Q2FyZCxcclxuICBmb3JtRWxlbWVudEF2YXRhcixcclxuICBidXR0b25BdmF0YXIsXHJcbn07IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgY29uZmlybWVkQWN0aW9uKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2FjdGlvbiA9IGNvbmZpcm1lZEFjdGlvbjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICB9XHJcblxyXG4gIC8v0JjQt9C80LXQvdC10L3QuNC1INGA0L7QtNC40YLQtdC70YzRgdC60L7Qs9C+INC80LXRgtC+0LTQsCDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgSDQv9C10YDQtdC00LDRh9C10Lkg0LIg0L3QtdCz0L4g0LrQsNGA0YLQvtGH0LrQuCDQtNC70Y8g0YPQtNCw0LvQtdC90LjRj1xyXG4gIG9wZW4oaXRlbSkge1xyXG4gICAgdGhpcy5pdGVtID0gaXRlbTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcblxyXG4gIC8v0JjQt9C80LXQvdC10L3QuNC1INGA0L7QtNC40YLQtdC70YzRgdC60L7Qs9C+INC80LXRgtC+0LTQsCDRg9GB0YLQsNC90L7QstC70LXQvdC40Y8g0YHQu9GD0YjQsNGC0LXQu9C10LlcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9hY3Rpb24odGhpcy5pdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7XHJcbiAgYXBpQ29uZmlnLFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgc2VsZWN0b3JzLFxyXG4gIGJ1dHRvbk9wZW5Qcm9maWxlUG9wdXAsXHJcbiAgYnV0dG9uT3BlbkNhcmRBZGRpdGlvblBvcHVwLFxyXG4gIGZvcm1FbGVtZW50UHJvZmlsZSxcclxuICBmb3JtRWxlbWVudENhcmQsXHJcbiAgZm9ybUVsZW1lbnRBdmF0YXIsXHJcbiAgYnV0dG9uQXZhdGFyLH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybSc7XHJcblxyXG4vL9CT0LXQvdC10YDQsNGG0LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmZ1bmN0aW9uIGdlbmVyYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVJZCwgdXNlckluZm8uaWQsIHtcclxuICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4geyAvL9Ck0YPQvdC60YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0L/QviDQutCw0YDRgtC40L3QutC1XHJcbiAgICAgICAgICAgIHBvcHVwSW1hZ2Uub3BlbihjYXJkLmdldENhcmREYXRhKCkpO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoKSA9PiB7IC8v0KTRg9C90LrRhtC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQv9C+INC40LrQvtC90LrQtSBcItGD0LTQsNC70LjRgtGMXCJcclxuICAgICAgcG9wdXBEZWxldGVDb25maXJtLm9wZW4oY2FyZCk7IC8v0J7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRj1xyXG4gICAgfSxcclxuICAgIGhhbmRsZUxpa2VDbGljazogKCkgPT4geyAvL9Ck0YPQvdC60YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0L3QsCBcItC70LDQudC6XCJcclxuICAgICAgaWYgKCFjYXJkLmlzTGlrZWQpIHtcclxuICAgICAgICBhcGkuYWRkTGlrZShjYXJkKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2UocmVzLmxpa2VzLmxlbmd0aCk7fSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpLnJlbW92ZUxpa2UoY2FyZClcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgY2FyZC50b2dnbGVMaWtlKHJlcy5saWtlcy5sZW5ndGgpO30pO1xyXG4gICAgICB9XHJcbiAgICB9fSk7XHJcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xyXG59IFxyXG5cclxuLy/QpNGD0L3QutGG0LjRjyDQsNC60YLQuNCy0LDRhtC40Lgg0LLQsNC70LjQtNCw0YbQuNC4INC00LvRjyDQvtCx0LXQuNGFINGE0L7RgNC8INC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG5mdW5jdGlvbiBlbmFibGVQYWdlVmFsaWRhdGlvbigpIHtcclxuICBmb3JtUHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgZm9ybUNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIGZvcm1BdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG4vL9Ch0L7Qt9C00LDQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0LAg0LrQu9Cw0YHRgdCwIEFwaVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpZyk7XHJcbmxldCBjYXJkQ29udGFpbmVyOyAvL9Ce0LHRitGP0LLQu9C10L3QuNC1LCDRh9GC0L7QsdGLINC60L7QvdGC0LXQudC90LXRgCDQvtGB0YLQsNC70YHRjyDQsiDQs9C70L7QsdCw0LvRjNC90L7QuSDQvtCx0LvQsNGB0YLQuCDQstC40LTQuNC80L7RgdGC0LhcclxuXHJcblByb21pc2UuYWxsKFtcclxuICBhcGkuZ2V0VXNlckRhdGEoKSAvL9Cf0L7Qu9GD0YfQtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8g0YEg0YHQtdGA0LLQtdGA0LBcclxuICAudGhlbihkYXRhID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKCgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKG5ldyBFcnJvcign0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60LgnKSk7XHJcbiAgfSksXHJcbiAgICBcclxuICBhcGkuZ2V0SW5pdGlhbENhcmRzRGF0YSgpXHJcbiAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAvL9Ch0L7Qt9C00LDQvdC40LUg0Y3QutC30LzQtdC/0LvRj9GA0LAg0LrQu9Cw0YHRgdCwIFNlY3Rpb24o0LrQvtC90YLQtdC50L3QtdGAINC60LDRgNGC0L7Rh9C10LopXHJcbiAgICBjYXJkQ29udGFpbmVyID0gbmV3IFNlY3Rpb24oIHsgXHJcbiAgICAgIGl0ZW1zOiBkYXRhLCAvL9Cc0LDRgdGB0LjQsiDRgSDQtNCw0L3QvdGL0LzQuCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwXHJcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4geyAvL9Ck0YPQvdC60YbQuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lgg0L3QsCDRgdGC0YDQsNC90LjRhtGDXHJcbiAgICAgICAgY29uc3QgY2FyZCA9IGdlbmVyYXRlQ2FyZChpdGVtKTtcclxuICAgICAgICBjYXJkQ29udGFpbmVyLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICAgIH19LFxyXG4gICAgICBzZWxlY3RvcnMuY29udGFpbmVyKTtcclxuXHJcbiAgLy/QoNC10L3QtNC10YAg0LrQsNGA0YLQvtGH0LXQuiBcItC40Lcg0LrQvtGA0L7QsdC60LhcIlxyXG4gIGNhcmRDb250YWluZXIuYWRkSW5pdGlhbEl0ZW1zKCk7XHJcbiAgfSlcclxuXSk7XHJcblxyXG4vL9Ch0L7Qt9C00LDQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0LAg0LrQu9Cw0YHRgdCwIEZvcm1WYWxpZGF0b3Ig0LTQu9GPINC60LDQttC00L7QuSDRhNC+0YDQvNGLXHJcbmNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnRQcm9maWxlKTtcclxuY29uc3QgZm9ybUNhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudENhcmQpO1xyXG5jb25zdCBmb3JtQXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnRBdmF0YXIpO1xyXG5cclxuLy/QodC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNCwINC60LvQsNGB0YHQsCBVc2VySW5mbyjQuNC90YTQvtGA0LzQsNGG0LjRjyDQv9GA0L7RhNC40LvRjykg0Lgg0LfQsNCz0YDRg9C30LrQsCDQtNCw0L3QvdGL0YUg0YEg0YHQtdGA0LLQtdGA0LBcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLm5hbWVGaWVsZCxcclxuICBqb2JTZWxlY3Rvcjogc2VsZWN0b3JzLmpvYkZpZWxkLFxyXG4gIGF2YXRhclNlbGVjdG9yOiBzZWxlY3RvcnMuYXZhdGFyfSk7XHJcbiAgXHJcbi8v0KHQvtC30LTQsNC90LjQtSDRjdC60LfQvNC10L/Qu9GP0YDQvtCyINGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40YUg0LrQu9Cw0YHRgdC+0LIg0LTQu9GPINC60LDQttC00L7Qs9C+INC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnBvcHVwUHJvZmlsZSwgKGRhdGEpID0+IHtcclxuICBwb3B1cFByb2ZpbGUucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGkuc2V0VXNlckRhdGEoZGF0YSlcclxuICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7IFxyXG4gICAgcG9wdXBQcm9maWxlLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7IHBvcHVwUHJvZmlsZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTsgfSlcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBDYXJkLCAoZGF0YSkgPT4ge1xyXG4gIHBvcHVwQ2FyZC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaS5zZXRDYXJkRGF0YShkYXRhKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gZ2VuZXJhdGVDYXJkKGRhdGEpO1xyXG4gICAgY2FyZENvbnRhaW5lci5hZGRJdGVtKGNhcmQpO1xyXG4gICAgcG9wdXBDYXJkLmNsb3NlKCk7fSlcclxuICAuZmluYWxseSgoKSA9PiB7IHBvcHVwQ2FyZC5yZW5kZXJMb2FkaW5nKGZhbHNlKTsgfSlcclxuICB9KTtcclxuICBcclxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBBdmF0YXIsIChkYXRhKSA9PiB7XHJcbiAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGkuc2V0QXZhdGFyKGRhdGEpXHJcbiAgLnRoZW4ocmVzID0+IHsgdXNlckluZm8uc2V0QXZhdGFyKHJlcyk7IH0pXHJcbiAgLnRoZW4oKCkgPT4geyBwb3B1cEF2YXRhci5jbG9zZSgpOyB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHsgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSk7IH0pXHJcbiAgfSk7XHJcblxyXG5jb25zdCBwb3B1cERlbGV0ZUNvbmZpcm0gPSBuZXcgUG9wdXBDb25maXJtKHNlbGVjdG9ycy5wb3B1cENvbmZpcm0sICAoaXRlbSkgPT4ge1xyXG4gIHBvcHVwRGVsZXRlQ29uZmlybS5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaS5kZWxldGVDYXJkKGl0ZW0pXHJcbiAgLnRoZW4oY2FyZCA9PiB7IGNhcmQuZGVsZXRlKCkgfSlcclxuICAudGhlbigoKSA9PiB7IHBvcHVwRGVsZXRlQ29uZmlybS5jbG9zZSgpOyB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHsgcG9wdXBEZWxldGVDb25maXJtLnJlbmRlckxvYWRpbmcoZmFsc2UpOyB9KVxyXG4gIH0pO1xyXG4gIFxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wb3B1cFBpY3R1cmUpO1xyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgXHJcbiAgLy/QlNC+0LHQsNCy0LvQtdC90LjQtSDRgdC70YPRiNCw0YLQtdC70LXQuSDQvdCwINCy0YHQtSDQvNC+0LTQsNC70YzQvdGL0LUg0L7QutC90LBcclxuICBwb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBwb3B1cENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBwb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgcG9wdXBEZWxldGVDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgcG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0JfQsNC/0L7Qu9C90LXQvdC40LUg0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0YssINC00L4g0LDQutGC0LjQstCw0YbQuNC4INCy0LDQu9C40LTQsNGG0LjQuCxcclxuLy/QvdC10L7QsdGF0L7QtNC40LzQviDRh9GC0L7QsdGLINC/0YDQuCDQsNC60YLQuNCy0LDRhtC40Lgg0LLQsNC70LjQtNCw0YbQuNC4INC+0L3QsCDQvdC1INC00LXQsNC60YLQuNCy0LjRgNC+0LLQsNC70LAg0LrQvdC+0L/QutGDLFxyXG4vL9C/0YDQvtCy0LXRgNC40LIg0L/Rg9GB0YLRg9GOINGE0L7RgNC80YNcclxucG9wdXBQcm9maWxlLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG5cclxuLy/QlNC+0LHQsNCy0LvQtdC90LjQtSDRgdC70YPRiNCw0YLQtdC70LXQuSDQvdCwINC60L3QvtC/0LrQuCDQvtGC0LrRgNGL0YLQuNGPINC80L7QtNCw0LvRjNC90YvRhSDQvtC60L7QvVxyXG5idXR0b25PcGVuUHJvZmlsZVBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICBwb3B1cFByb2ZpbGUub3BlbigpfSk7XHJcblxyXG5idXR0b25PcGVuQ2FyZEFkZGl0aW9uUG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgZm9ybUNhcmRWYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBwb3B1cENhcmQub3BlbigpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cEF2YXRhci5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy/QkNC60YLQuNCy0LDRhtC40Y8g0LLQsNC70LjQtNCw0YbQuNC4INC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG5lbmFibGVQYWdlVmFsaWRhdGlvbigpOyJdLCJuYW1lcyI6WyJDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsInBhZ2VPd25lciIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJvd25lciIsIl9pZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfbGlrZXMiLCJfbGlrZUNvdW50IiwibGVuZ3RoIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX293bmVyIiwiX2hhbmRsZUxpa2VDbGljayIsIl91c2VySWQiLCJpc0xpa2VkIiwiX2NoZWNrTGlrZSIsIl90ZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJfY2FyZCIsImNsb25lTm9kZSIsIl9pbWFnZSIsIl90ZXh0IiwiX2J1dHRvbkxpa2UiLCJfYnV0dG9uRGVsZXRlIiwiX2xpa2VDb3VudGVyIiwicmVtb3ZlIiwibGlrZSIsImZvckVhY2giLCJ1c2VyIiwiY2xhc3NMaXN0IiwiYWRkIiwiY291bnQiLCJzZXRMaWtlc0NvdW50IiwiX3JlbW92ZUxpa2UiLCJfYWRkTGlrZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImRhdGEiLCJ0ZXh0IiwiX2dldFRlbXBsYXRlIiwiX2NoZWNrT3duZXIiLCJfc2V0RGF0YSIsIl9zZXRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9jb25maWciLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJidXR0b25PcGFjaXR5IiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsImNhcmQiLCJwcmVwZW5kIiwicmV2ZXJzZSIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2J1dHRvblN1Ym1pdCIsIl9idXR0b25DbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJpc0xvYWRpbmciLCJkYXRhc2V0IiwiYnV0dG9uTG9hZGluZ1RleHQiLCJidXR0b25UZXh0IiwiUG9wdXBXaXRoSW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiaW5wdXRWYWx1ZXNMaXN0IiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiaW5kZXgiLCJyZXNldCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9qb2IiLCJfYXZhdGFyIiwiam9iIiwiYWJvdXQiLCJhdmF0YXIiLCJzZXRBdmF0YXIiLCJoYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsInN0YXR1cyIsIkFwaSIsInVybCIsImhlYWRlcnMiLCJfdXJsIiwiX2hlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJzZWxlY3RvcnMiLCJjb250YWluZXIiLCJuYW1lRmllbGQiLCJqb2JGaWVsZCIsInBvcHVwUHJvZmlsZSIsInBvcHVwQ2FyZCIsInBvcHVwUGljdHVyZSIsInBvcHVwQ29uZmlybSIsInBvcHVwQXZhdGFyIiwiY2FyZFRlbXBsYXRlSWQiLCJidXR0b25PcGVuUHJvZmlsZVBvcHVwIiwiYnV0dG9uT3BlbkNhcmRBZGRpdGlvblBvcHVwIiwiYnV0dG9uQXZhdGFyIiwiZm9ybUVsZW1lbnRQcm9maWxlIiwiZm9ybUVsZW1lbnRDYXJkIiwiZm9ybUVsZW1lbnRBdmF0YXIiLCJQb3B1cENvbmZpcm0iLCJjb25maXJtZWRBY3Rpb24iLCJfYWN0aW9uIiwiZ2VuZXJhdGVDYXJkIiwidXNlckluZm8iLCJwb3B1cEltYWdlIiwib3BlbiIsImdldENhcmREYXRhIiwicG9wdXBEZWxldGVDb25maXJtIiwiYXBpIiwicmVtb3ZlTGlrZSIsInRvZ2dsZUxpa2UiLCJhZGRMaWtlIiwiY3JlYXRlQ2FyZCIsImNhcmRDb250YWluZXIiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0VXNlckRhdGEiLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsImdldEluaXRpYWxDYXJkc0RhdGEiLCJhZGRJdGVtIiwiYWRkSW5pdGlhbEl0ZW1zIiwiZm9ybVByb2ZpbGVWYWxpZGF0b3IiLCJmb3JtQ2FyZFZhbGlkYXRvciIsImZvcm1BdmF0YXJWYWxpZGF0b3IiLCJyZW5kZXJMb2FkaW5nIiwic2V0VXNlckRhdGEiLCJmaW5hbGx5Iiwic2V0Q2FyZERhdGEiLCJkZWxldGVDYXJkIiwiZGVsZXRlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJzZXRJbnB1dFZhbHVlcyIsImdldFVzZXJJbmZvIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=